<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-E5HB6L2L9C"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-E5HB6L2L9C');
	</script>
	<title>Truck Cargo Planner</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<link rel="shortcut icon" type="image/x-icon" href="assets/code.ico">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.css">
	<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville&family=Mulish&family=Raleway&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
	<link rel="stylesheet" type="text/css" href="main.css">
</head>
<body>
	<section class="container">
		<div class="row">
			<div class="col-lg-12 mx-auto">
				<div th:if="${menuNav}" class="float-start">
					<form th:action="@{/packagingInstruction}" target="_blank">
						<input type="submit" value="Packaging Instruction"/>
					</form>
				</div>
				<div th:if="${menuNav}" class="float-start">
					<form th:action="@{/emptiesList}" target="_blank">
						<input type="submit" value="Empties list"/>
					</form>
				</div>
				<div th:if="${menuNav}" class="float-start">
					<form th:action="@{/createCargoList}">
						<input type="submit" value="Create Cargo List"/>
					</form>
				</div>
				<div th:if="${menuNav}" class="float-start">
					<form th:action="@{/display}">
						<input type="submit" value="Back to main page"/>
					</form>
				</div>
				<div th:if="${menuNav}" class="float-end">
					<form th:action="@{/logout}">
						<input type="submit" value="Logout"/>
					</form>
				</div>
				<div class="float-end"><span>You are logged in as: </span><span th:text="${username}"></span></div>
			</div>
		</div>
	</section>
	
	<section th:if="${packagingInstructionNav}" class="container">
		<div class="row">
			<div class="col-lg-8 mx-auto">
				<table class="table caption-top">
				<caption>Packaging instruction</caption>
					<thead>
						<tr class="border-bottom">
							<th>#</th>
							<th>Item number</th>
							<th>Weight (kg/pc)</th>
							<th>Pallet type</th>
							<th>Box type</th>
							<th>Pcs in pallet</th>
							<th>Pcs in box</th>
							<th>Boxes in row</th>
							<th>Rows on pallet</th>
							<th>Pallet stackable</th>
						</tr>
					</thead>
					<tbody>
						<tr class="border-bottom" th:object="${pack}" th:each="pack,stat : ${packagingInstruction}">
							<td th:text="${stat.count}">1</td>
							<td th:text="*{itemNo}">Nr0001</td>
							<td class="text-end" th:text="*{weight}">10.4</td>
							<td th:text="*{palletType}">pal002</td>
							<td th:text="*{boxType}">box005</td>
							<td class="text-end" th:text="*{pcsInBox} * *{boxesInRow} * *{rowsOnPallet}">960</td>
							<td class="text-end" th:text="*{pcsInBox}">40</td>
							<td class="text-end" th:text="*{boxesInRow}">8</td>
							<td class="text-end" th:text="*{rowsOnPallet}">3</td>
							<td th:text="*{stackable}">true</td>
						</tr>
						<tr th:remove="all">
							<td>2</td>
							<td>Nr0002</td>
							<td>108</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</section>
	
		<section th:if="${emptiesListNav}" class="container">
		<div class="row">
			<div class="col-lg-5 mx-auto">
				<table class="table caption-top border-bottom">
				<caption>Boxes and containers list</caption>
					<thead>
						<tr class="border-bottom">
							<th>#</th>
							<th>Type</th>
							<th>Name</th>
							<th class="text-end">Weight (kg/pc)</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="box,stat : ${emptiesList}" th:class="${#strings.equals(box.boxName, 'Silver Box') ? 'silver' 
						: #strings.equals(box.boxName, 'Orange Box') ? 'orange' : #strings.equals(box.boxName, 'Light Blue Box') ? 'light_blue' : #strings.equals(box.boxName, 'Red Box') ? 'red' 
						: #strings.equals(box.boxName, 'Grey Box') ? 'grey' : #strings.equals(box.boxName, 'Green Box') ? 'green' : #strings.equals(box.boxName, 'Brown Box') ? 'brown' 
						: #strings.equals(box.boxName, 'Blue Box') ? 'blue' : #strings.equals(box.boxName, 'Purple Box') ? 'purple' : #strings.equals(box.boxName, 'Black Box') ? 'black' 
						: #strings.equals(box.boxName, 'Light Green Box') ? 'light_green' : ''}">
							<td class="border-bottom" th:text="${stat.count}">1</td>
							<td class="border-bottom" th:text="${box.boxType}">box001</td>
							<td class="border-bottom" th:text="${box.boxName}">Cardboard Box</td>
							<td class="border-bottom text-end" th:text="${box.boxWeight}">1.0</td>
						</tr>
						<tr th:remove="all">
							<td>2</td>
							<td>Nr0002</td>
							<td>108</td>
						</tr>
					</tbody>
				</table>
				<span>Color usage for transparency.</span>
			</div>
		</div>
	</section>
	
	<section th:if="${createCargoListSelectNav}" id="list_select" class="container">
		<div class="row">
			<div class="col-lg-12 mx-auto">
			<h3>Please select the item numbers of products to be delivered and click the Submit button below!</h3>
				<form action="#" th:action="@{/createCargoListSelect}" th:object="${itemNumberSetDTO}" method="post">
				<ul>
					<li th:each="iMap : ${itemMap}">
						<input type="checkbox" th:field="*{itemNumberSet}" th:value="${iMap.key}">
						<label for="${#ids.next('iMap')}" th:text="${iMap.value}">NR0001</label>
					</li>
				</ul>
					<input type="submit" value="Submit">
				</form><br>
				<div th:if="${list}">
					<h3>You have selected out the following items for shipping:</h3><br>
						<span th:text="${list}"></span><br><br>
					<h3>If you want to deliver these goods please click the Next button to add quantities to the list, otherwise repeat the selection process!</h3><br>
					<form th:action="@{/createCargoListQuantity}" method="post">
						<input type="submit" value="Next"/>
					</form>
				</div><br>
				<form th:action="@{/display}">
					<input type="submit" value="Back to main page"/>
				</form>
			</div>
		</div>
	</section>
	
	<section th:if="${createCargoListMainNav}" class="container">
		<div class="row">
			<span class="text-center">Please note if delivered quatity rounded up to the smallest packaging unit.</span>

			<div class="col-lg-5 mx-auto">
				<table class="table caption-top border-bottom">
				<caption>Items To Be Delivered</caption>
					<thead>
						<tr class="border-bottom">
							<th>#</th>
							<th>Item Number</th>
							<th>Quantity Required</th>
							<th>Quantity To Be Delivered</th>
							<th></th>
						</tr>
					</thead>
					<tbody>
						<tr class="border-bottom" th:object="${item}" th:each="item,stat : ${cargoItemList}">
							<td th:text="${stat.count}">1</td>
							<td th:text="*{itemNumber}">Nr0001</td>
							<td class="text-end" th:text="*{qtyNeeds}">0</td>
							<td class="text-end" th:text="*{qtyToBeDelivered}">0</td>
							<td class="text-center"><form th:action="@{/modifyQuantity(id=${item.id})}" method="post"><input type="submit" value="Qty mod"/></form></td>
						</tr>
						<tr th:remove="all">
							<td>2</td>
							<td>Nr0002</td>
							<td>108</td>
						</tr>
					</tbody>
				</table>
			</div>

			<div class="col-lg-5 mx-auto">
				<table class="table caption-top border-bottom">
				<caption>Cargo Details</caption>
					<thead>
						<tr class="border-bottom">
							<th></th>
							<th>Quantity</th>
							<th>Qty units</th>
						</tr>
					</thead>
					<tbody th:object="${cargoListDTO}">
						<tr class="border-bottom">
							<td>Netto weight:</td>
							<td class="text-end" th:text="*{nettoWeight}"></td>
							<td>kg</td>
						</tr>
						<tr class="border-bottom">
							<td>Empties weight:</td>
							<td class="text-end" th:text="*{emptiesWeight}"></td>
							<td>kg</td>
						</tr>
						<tr class="border-bottom">
							<td>Gross weight:</td>
							<td class="text-end" th:text="*{bruttoWeight}"></td>
							<td>kg</td>
						</tr>
						<tr class="border-bottom">
							<td>Number of pallet(s):</td>
							<td class="text-end" th:text="*{numberOfPallets}"></td>
							<td>pc(s)</td>
						</tr>
						<tr class="border-bottom">
							<td>- from this whole pallet(s):</td>
							<td class="text-end" th:text="*{numberOfWholePallets}"></td>
							<td>pc(s)</td>
						</tr>
						<tr class="border-bottom">
							<td>- from this not whole pallet(s):</td>
							<td class="text-end" th:text="*{numberOfNotWholePallets}"></td>
							<td>pc(s)</td>
						</tr>
						<tr class="border-bottom">
							<td>Required loading space in pallet(s):</td>
							<td class="text-end" th:text="*{loadingSpace}"></td>
							<td>pc(s)</td>
						</tr>
					</tbody>
				</table>

				<div th:unless ="${cargoListDTO.empties.isEmpty}">
					<table class="table caption-top border-bottom">
					<caption>Empties List</caption>
						<thead>
							<tr class="border-bottom">
								<th>#</th>
								<th>Title</th>
								<th class="text-end">Quantity</th>
								<th>Qty units</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="element,stat : ${cargoListDTO.empties}" th:class="${#strings.equals(element.key, 'Silver Box') ? 'silver' 
							: #strings.equals(element.key, 'Orange Box') ? 'orange' : #strings.equals(element.key, 'Light Blue Box') ? 'light_blue' : #strings.equals(element.key, 'Red Box') ? 'red' 
							: #strings.equals(element.key, 'Grey Box') ? 'grey' : #strings.equals(element.key, 'Green Box') ? 'green' : #strings.equals(element.key, 'Brown Box') ? 'brown' 
							: #strings.equals(element.key, 'Blue Box') ? 'blue' : #strings.equals(element.key, 'Purple Box') ? 'purple' : #strings.equals(element.key, 'Black Box') ? 'black' 
							: #strings.equals(element.key, 'Light Green Box') ? 'light_green' : ''}">
								<td class="border-bottom" th:text="${stat.count}">1</td>
								<td class="border-bottom" th:text="${element.key}">Green Box</td>
								<td class="border-bottom text-end" th:text="${element.value}">13</td>
								<td class="border-bottom">pc(s)</td>
							</tr>
						</tbody>
					</table>
					<span>Color usage for transparency.</span>
				</div><br>

			</div>
			
		</div>
	</section>

	<section th:if="${modifyQuantityNav}" class="container">
		<div class="row">
			<div class="col-lg-4 mx-auto">
			<h2>Requested quantity modification</h2><br>
			<span>Please enter the required quantity of the item.<br><br> Please note if delivered quatity rounded up to the smallest packaging unit.</span><br><br>
			<span>Item number: </span><span th:text="${cargoItem.itemNumber}"></span>
			<form th:action="@{/modifyCargoItem}" th:object="${cargoItem}" method="POST">
				<input type="hidden" th:field="*{id}">
				<input type="hidden" th:field="*{itemNumber}">
				<input type="hidden" th:field="*{qtyToBeDelivered}">
				<label for="quantity">Quantity:</label>
				<input type="text" th:field="*{qtyNeeds}"><br>
				<input type="submit" value="Ok">
			</form>
			</div>
		</div>
	</section>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>